# 감각 기반 명상 웹앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
감각 기반 스킨케어 명상 웹앱

### 1.2 프로젝트 목적
사용자가 스킨케어 과정에서 감각(촉각·청각·정서)에 집중할 수 있도록, 단계별 가이드와 명상 요소를 결합한 모바일 웹 기반 명상 경험을 제공한다.

### 1.3 개발 범위
- 모바일 웹 기반 MVP 개발
- 스킨케어 루틴 선택 및 자동 진행 기능
- 배경음악(BGM) 및 음성 가이드 재생
- 루틴 전·후 감정 상태 기록 및 결과 요약
- 세션 단위 데이터 저장 및 관리

## 2. 기술 스택
- 프런트 엔드 : Next.js (App Router), TypeScript, Tailwind CSS
- 백 엔드 : Next.js Route Handlers / Server Actions
- 데이터 베이스 : Supabase (PostgreSQL), Supabase Storage (오디오 파일)

## 3. 기본 사항
- 플랫폼: 모바일 웹 우선 (iOS/Android 브라우저)
- UX 원칙: 큰 버튼, 높은 대비, 최소 인터랙션
- 데이터 단위: 세션(Session) 중심 저장
- 오류 대응 1 : 오디오 로딩 실패 시 텍스트 가이드로 대체
- 오류 대응 2 : 데이터 저장 실패 시 UX 흐름 차단 없이 재시도 가능 구조

## 4. 화면별 상세 요구사항

### 4.1 인트로 화면 (Intro)

#### 4.1.1 화면 목적
- 서비스의 분위기와 가치를 전달하여 사용자의 첫인상을 형성
- 루틴 시작 진입점 제공

#### 4.1.2 기능 요구사항
- 앱 진입 시 최초 표시되는 랜딩 화면
- "루틴 시작하기" 버튼 클릭 시 루틴 설정 화면으로 이동

#### 4.1.3 UI/UX 요구사항
- **상단 영역**
  - 앱명 또는 짧은 태그라인 표시
  - 브랜드 아이덴티티를 반영한 타이포그래피 및 색상 적용
- **중앙 영역**
  - 짧은 안내 문구 표시: "지금 이 순간, 나에게 집중해보세요"
  - 문구는 중앙 정렬, 가독성 높은 폰트 크기 사용
- **하단 영역**
  - 주요 CTA 버튼: [루틴 시작하기]
  - 버튼은 화면 하단 고정 또는 중앙 하단 배치
  - 버튼 크기: 최소 48px 높이 (터치 친화적)
  - 버튼 스타일: 강조 색상, 둥근 모서리

#### 4.1.4 데이터 요구사항
- 세션 데이터 미생성 (화면 전환 시 세션 생성)

#### 4.1.5 예외 처리
- 네트워크 오류 시에도 화면 표시 가능 (정적 콘텐츠)

---

### 4.2 루틴 설정 화면 (Emotion + BGM + Skincare)

#### 4.2.1 화면 목적
- 루틴 시작 전 주요 설정을 한 화면에서 완료하여 진입 속도 및 몰입도 향상
- 사용자의 현재 감정 상태, 선호하는 배경음악, 수행할 스킨케어 단계를 한 번에 설정

#### 4.2.2 기능 요구사항
- 감정 점수 선택 (1~5 단계, 필수)
- BGM 선택 (4개 옵션: 3개 BGM + 없음, 선택)
- 스킨케어 단계 선택 (토너/에센스/크림/올인원, 최소 1개 이상 필수)
- "다음" 버튼 클릭 시 선택된 설정 검증 후 다음 화면으로 이동
- 설정 미완료 시 에러 메시지 표시

#### 4.2.3 UI/UX 요구사항
- **상단 영역**
  - 화면 제목: "오늘의 루틴 설정"
  - 제목은 상단 중앙 또는 좌측 정렬
- **섹션 1: 감정 선택**
  - 질문 텍스트: "지금 기분은 어떤가요?"
  - 감정 점수 선택 UI: 1~5 단계
  - 구현 방식: 이모지 또는 원형 버튼 (5개)
  - 각 단계는 터치 가능한 영역으로 구성
  - 선택된 항목은 시각적 하이라이트 (색상 변화, 크기 변화 등)
  - 점수별 의미 표시 (예: 1=매우 나쁨, 5=매우 좋음)
- **섹션 2: BGM 선택**
  - 섹션 타이틀: "배경음"
  - BGM 리스트 카드 형태로 표시 (3개 BGM + "없음" 옵션)
  - 각 카드에는 BGM명과 간단한 분위기 설명 표시
  - 카드 선택 시 하이라이트 효과
  - BGM 미리듣기 기능 (선택사항, MVP에서는 제외 가능)
- **섹션 3: 스킨케어 단계 선택**
  - 섹션 타이틀: "스킨케어 단계"
  - 단계 선택 토글 형태
  - 옵션: 토너 / 에센스(또는 로션) / 크림 / 올인원
  - 최소 1개 이상 선택 필수
  - 다중 선택 가능
  - 선택된 항목은 체크박스 또는 토글 활성화 상태로 표시
- **하단 영역**
  - [다음] 버튼
  - 버튼은 화면 하단 고정 또는 스크롤 가능 영역 하단 배치
  - 필수 항목 미선택 시 버튼 비활성화 또는 클릭 시 에러 메시지 표시

#### 4.2.4 데이터 요구사항
- 선택된 감정 점수 (1~5)
- 선택된 BGM ID 또는 null
- 선택된 스킨케어 단계 배열 (최소 1개)
- 세션 데이터 생성 준비 (다음 화면에서 저장)

#### 4.2.5 예외 처리
- 필수 항목 미선택 시 에러 메시지 표시
- BGM 로딩 실패 시 "없음" 옵션으로 자동 설정 또는 경고 표시

---

### 4.3 음성 가이드 설정 및 루틴 시작 진입 화면

#### 4.3.1 화면 목적
- 음성 가이드 사용 여부 선택
- 최종 루틴 시작 진입점 제공

#### 4.3.2 기능 요구사항
- 음성 가이드 On/Off 토글 선택
- "루틴 시작" 버튼 클릭 시 루틴 진행 화면으로 이동
- 세션 데이터 생성 및 저장 시작

#### 4.3.3 UI/UX 요구사항
- **상단 영역**
  - 질문 텍스트: "음성 가이드를 들으시겠어요?"
  - 텍스트는 중앙 정렬 또는 상단 중앙 배치
- **중앙 영역**
  - On / Off 토글 버튼
  - 토글은 큰 크기로 표시 (터치 친화적)
  - 기본값: On (권장)
  - 토글 상태는 시각적으로 명확히 구분
- **하단 영역**
  - [루틴 시작] 버튼
  - 버튼은 화면 하단 고정 또는 중앙 하단 배치
  - 버튼 크기: 최소 48px 높이
  - 버튼 스타일: 강조 색상, 둥근 모서리

#### 4.3.4 데이터 요구사항
- 음성 가이드 사용 여부 (boolean)
- 이전 화면에서 선택한 설정들 (감정, BGM, 스킨케어 단계)
- 세션 데이터 생성 및 저장

#### 4.3.5 예외 처리
- 세션 생성 실패 시 재시도 가능한 구조
- 오디오 파일 로딩 실패 시에도 루틴 진행 가능 (텍스트 가이드로 대체)

---

### 4.4 루틴 진행 화면 (Routine)

#### 4.4.1 화면 목적
- 명상 + 스킨케어 루틴 자동 진행
- 사용자가 단계별 가이드를 따라 스킨케어를 수행하며 명상에 집중

#### 4.4.2 기능 요구사항
- 선택된 스킨케어 단계 순서대로 자동 진행
- 각 단계별 명상 문장 표시
- 단계 진행 상태 시각화
- 음성 가이드 선택 시 오디오 재생
- BGM 선택 시 배경음악 재생
- "중단하기" 버튼 클릭 시 루틴 중단 및 확인 다이얼로그 표시
- 각 단계 완료 시 자동으로 다음 단계로 전환
- 모든 단계 완료 시 자동으로 감정 변화 기록 화면으로 이동

#### 4.4.3 UI/UX 요구사항
- **상단 영역**
  - 현재 단계명 표시 (예: "토너 단계", "에센스 단계")
  - 단계명은 명확하고 큰 폰트로 표시
- **중앙 영역**
  - 현재 명상 문장 표시
  - 문장은 중앙 정렬, 가독성 높은 폰트 크기
  - 문장 전환 시 부드러운 페이드 효과
  - 각 단계별 적절한 타이밍에 문장 자동 전환
- **진행 상태 시각화**
  - 단계 진행 상태를 시각적으로 표시
  - 구현 방식: 진행 바 또는 점(dot) 인디케이터
  - 현재 단계는 하이라이트
  - 완료된 단계는 체크 표시 또는 다른 색상
- **하단 영역**
  - [중단하기] 버튼
  - 버튼은 단일 버튼으로 강조 표시
  - 버튼 색상: 경고 색상 또는 중립 색상
  - 클릭 시 확인 다이얼로그 표시 ("정말 중단하시겠어요?")

#### 4.4.4 데이터 요구사항
- 현재 진행 중인 단계 정보
- 각 단계별 명상 문장 데이터
- 단계별 소요 시간 기록
- 루틴 시작 시간 및 진행 시간
- 세션 진행 상태 업데이트

#### 4.4.5 예외 처리
- 오디오 로딩 실패 시 텍스트 가이드로 자동 대체
- 네트워크 오류 시에도 로컬에 저장된 문장으로 진행 가능
- 중단 시 진행 상태 저장 (선택사항)

---

### 4.5 감정 변화 기록 화면 (After Emotion)

#### 4.5.1 화면 목적
- 루틴 완료 후 사용자의 감정 상태 기록
- 루틴 전후 감정 변화 비교를 위한 데이터 수집

#### 4.5.2 기능 요구사항
- 루틴 전 감정 점수와 비교 가능한 UI 제공
- 감정 점수 선택 (1~5 단계, 필수)
- "결과 보기" 버튼 클릭 시 결과 요약 화면으로 이동
- 선택 미완료 시 에러 메시지 표시

#### 4.5.3 UI/UX 요구사항
- **상단 영역**
  - 질문 텍스트: "지금 기분은 어떤가요?"
  - 텍스트는 중앙 정렬 또는 상단 중앙 배치
- **중앙 영역**
  - 감정 점수 선택 UI (1~5)
  - 루틴 설정 화면과 동일한 UI 패턴 사용 (일관성)
  - 선택된 항목은 시각적 하이라이트
  - 루틴 전 감정 점수 힌트 표시 (선택사항, 예: "이전: 3점")
- **하단 영역**
  - [결과 보기] 버튼
  - 버튼은 화면 하단 고정 또는 중앙 하단 배치
  - 버튼 크기: 최소 48px 높이
  - 선택 미완료 시 버튼 비활성화 또는 클릭 시 에러 메시지

#### 4.5.4 데이터 요구사항
- 루틴 후 감정 점수 (1~5)
- 루틴 전 감정 점수 (비교용)
- 세션 데이터 업데이트

#### 4.5.5 예외 처리
- 감정 점수 미선택 시 에러 메시지 표시
- 데이터 저장 실패 시 재시도 가능한 구조

---

### 4.6 결과 요약 화면 (Summary)

#### 4.6.1 화면 목적
- 루틴 효과 요약 및 피드백 수집
- 사용자에게 루틴 완료에 대한 성취감 제공
- 향후 서비스 개선을 위한 데이터 수집

#### 4.6.2 기능 요구사항
- 감정 변화 요약 표시 (전/후 비교)
- 만족도 점수 선택 (1~5, 필수)
- 재사용 의향 선택 (Yes/No, 필수)
- "완료" 버튼 클릭 시 세션 데이터 저장 및 인트로 화면 또는 홈으로 이동
- 선택 미완료 시 에러 메시지 표시

#### 4.6.3 UI/UX 요구사항
- **상단 영역**
  - 요약 제목: "오늘의 루틴 요약"
  - 제목은 상단 중앙 또는 좌측 정렬
- **중앙 영역**
  - **감정 변화 요약**
    - 루틴 전 감정 점수와 루틴 후 감정 점수 비교 표시
    - 시각적 표현: 숫자, 그래프, 또는 이모지
    - 변화량 강조 표시 (예: "+2점 상승")
  - **만족도 점수 선택**
    - 질문: "이번 루틴에 만족하셨나요?"
    - 점수 선택 UI (1~5)
    - 감정 선택과 동일한 UI 패턴 사용
  - **재사용 의향 선택**
    - 질문: "다시 사용하시겠어요?"
    - Yes/No 버튼 또는 토글 형태
    - 명확한 선택 UI 제공
- **하단 영역**
  - [완료] 버튼
  - 버튼은 화면 하단 고정 또는 중앙 하단 배치
  - 버튼 크기: 최소 48px 높이
  - 버튼 스타일: 강조 색상, 둥근 모서리
  - 필수 항목 미선택 시 버튼 비활성화 또는 클릭 시 에러 메시지

#### 4.6.4 데이터 요구사항
- 루틴 전 감정 점수
- 루틴 후 감정 점수
- 감정 변화량 계산
- 만족도 점수 (1~5)
- 재사용 의향 (boolean)
- 세션 완료 상태 및 최종 데이터 저장

#### 4.6.5 예외 처리
- 필수 항목 미선택 시 에러 메시지 표시
- 데이터 저장 실패 시 재시도 가능한 구조
- 저장 성공 후 화면 전환

---

## 5. 화면 간 플로우

### 5.1 사용자 플로우
1. 인트로 화면 → [루틴 시작하기] 클릭
2. 루틴 설정 화면 → 감정/BGM/스킨케어 선택 → [다음] 클릭
3. 음성 가이드 설정 화면 → On/Off 선택 → [루틴 시작] 클릭
4. 루틴 진행 화면 → 자동 진행 → 모든 단계 완료
5. 감정 변화 기록 화면 → 감정 점수 선택 → [결과 보기] 클릭
6. 결과 요약 화면 → 만족도/재사용 의향 선택 → [완료] 클릭 → 인트로 화면으로 복귀

### 5.2 예외 플로우
- 루틴 진행 중 [중단하기] 클릭 → 확인 다이얼로그 → 중단 시 인트로 화면 또는 이전 화면으로 복귀
- 각 화면에서 필수 항목 미선택 시 에러 메시지 표시 및 진행 차단