# 프로젝트 요구사항 정의서 (PRD)

> **관련 문서**: 
> - 프런트엔드 설계: [frontend-design.md](./frontend-design.md)
> - UI/UX 가이드: [wireframeguide2.md](./wireframeguide2.md)
> - 텍스트 및 시간 설정: [ROUTINE_PLAY_TEXTS.md](./ROUTINE_PLAY_TEXTS.md)

## 1. 프로젝트 개요

### 1.1 프로젝트명

감각 기반 스킨케어 명상 웹앱

### 1.2 프로젝트 목적

사용자가 스킨케어 과정에서 감각(촉각·청각·정서)에 집중할 수 있도록, 단계별 가이드와 명상 요소를 결합한 모바일 웹 기반 명상 경험을 제공한다.

### 1.3 개발 범위

* 모바일 웹 기반 MVP 개발
* 루틴 설정 (감정, BGM, 루틴 모드) 및 자동 진행 기능
* 배경음악(BGM) 및 음성 가이드 재생
* 루틴 전·후 감정 상태 기록 및 결과 요약
* 세션 단위 데이터 저장 및 관리

## 2. 기술 스택

* 프런트 엔드 : Next.js (App Router), TypeScript, Tailwind CSS
* 백 엔드 : Next.js Route Handlers / Server Actions
* 데이터 베이스 : Supabase (PostgreSQL), Supabase Storage (오디오 파일)

## 3. 기본 사항

* 플랫폼: 모바일 웹 우선 (iOS/Android 브라우저)
* UX 원칙: 큰 버튼, 높은 대비, 최소 인터랙션
* 데이터 단위: 세션(Session) 중심 저장
* 오류 대응 1 : 오디오 로딩 실패 시 텍스트 가이드로 대체
* 오류 대응 2 : 데이터 저장 실패 시 UX 흐름 차단 없이 재시도 가능 구조

## 4. 화면별 상세 요구사항

### 4.1 인트로 화면 (Intro)

#### 4.1.1 화면 목적

* 서비스의 분위기와 가치를 전달하여 사용자의 첫인상을 형성
* 루틴 시작 진입점 제공

#### 4.1.2 기능 요구사항

* 앱 진입 시 최초 표시되는 랜딩 화면
* "오늘의 루틴 고르기" 버튼 클릭 시 루틴 설정 화면으로 이동

#### 4.1.3 UI/UX 요구사항

* **상단 영역**: 태그라인 텍스트("잠깐, 피부에만 집중하는 시간") 표시
* **중앙 영역**: 원형 이미지 및 안내 문구("짧은 루틴을 시작하세요")
* **하단 영역**: 주요 CTA 버튼: [오늘의 루틴 고르기]

#### 4.1.4 데이터 요구사항

* 세션 데이터 미생성 (화면 전환 시 생성되지 않음)

#### 4.1.5 예외 처리

* 네트워크 오류 시에도 화면 표시 가능 (정적 콘텐츠)

---

### 4.2 루틴 설정 화면 (Emotion + BGM + Routine Mode + Skincare)

#### 4.2.1 화면 목적

* 루틴 시작 전 주요 설정을 한 화면에서 완료하여 진입 속도 및 몰입도 향상

#### 4.2.2 기능 요구사항

* 감정 점수 선택 (1~5 단계)
* BGM 선택 (2개 옵션 + 없음)
* 루틴 모드 선택 (기본 / 단계별 가이드)
* 단계별 가이드 모드 선택 시, 스킨케어 단계 토글 선택 UI 표시 (최소 1개 이상 필수)
* "다음" 버튼 클릭 시 검증 후 다음 화면으로 이동

#### 4.2.3 UI/UX 요구사항

* **감정 선택**: 이모지 기반 5점 척도 UI, 라벨 포함
* **BGM 선택**: 카드형 UI, 이미지 + 설명 포함, 선택 시 하이라이트
* **루틴 모드 선택**: 라디오 또는 토글 UI (기본 / 상세)
* **스킨케어 단계**: 기본은 숨김, 상세 모드에서만 선택 가능. 최소 1개 선택 유도
* **하단 버튼**: [다음], 조건 충족 시 활성화

#### 4.2.4 데이터 요구사항

* 감정 점수, BGM ID, 루틴 모드, 선택된 단계 배열 (상세 모드인 경우)

#### 4.2.5 예외 처리

* 필수 항목 미선택 시 버튼 비활성화 또는 에러 메시지 표시

---

### 4.3 음성 가이드 설정 화면

#### 4.3.1 화면 목적

* 음성 가이드 사용 여부 선택

#### 4.3.2 기능 요구사항

* 음성 가이드 On/Off 토글 선택 (기본값: On)
* 텍스트 가이드 설명 표시
* "루틴 시작" 버튼 클릭 시 루틴 화면으로 이동

#### 4.3.3 UI/UX 요구사항

* **질문 텍스트**: "음성 가이드를 들으시겠어요?"
* **토글 UI**: 상태별 안내 문구 표시 (On/Off 상태 설명)
* **하단 CTA**: [루틴 시작] 버튼, 고정 위치

#### 4.3.4 데이터 요구사항

* 음성 가이드 사용 여부 (boolean)

#### 4.3.5 예외 처리

* 오디오 로딩 실패 시 텍스트 가이드로 대체

---

### 4.4 루틴 진행 화면

#### 4.4.1 화면 목적

* 사용자 몰입을 위한 스킨케어 + 명상 루틴 자동 진행

#### 4.4.2 기능 요구사항

* 현재 단계명 및 명상 문구 표시
* 단계 진행 상태 시각화 (dots)
* 음성 가이드 및 BGM 재생 (선택사항 기반)
* 일시중지/재개 기능 (진행 중인 단계에서 일시 정지 가능)
* 중단 버튼 클릭 시 확인 후 종료 처리
* 모든 단계 완료 시 다음 화면으로 자동 이동
* 개발 모드에서는 강제 완료/중단 버튼 및 다음 단계로 이동 버튼 노출

#### 4.4.3 UI/UX 요구사항

* **상단**: 현재 단계명 (예: 토너 단계)
* **중앙**: 명상 문장 (애니메이션 효과 선택적)
* **진행 바**: 점(dot) 인디케이터
* **하단**: 
  * 마지막 단계: [끝내기] 버튼
  * 진행 중: [일시중지]/[재개] 버튼 및 [중단하기] 버튼 (나란히 배치)

#### 4.4.4 데이터 요구사항

* 진행 단계명, 타임스탬프, 세션 상태 (진행/중단 여부)

#### 4.4.5 예외 처리

* 오디오 로딩 실패 시 텍스트 대체

---

### 4.5 감정 변화 기록 화면

#### 4.5.1 화면 목적

* 루틴 후 감정 상태 기록 및 비교

#### 4.5.2 기능 요구사항

* 감정 점수 선택 (1~5), 이전 점수 표시
* 완료 시 결과 요약 화면으로 이동

#### 4.5.3 UI/UX 요구사항

* **질문 텍스트**: "지금 기분은 어떤가요?"
* **감정 선택 UI**: 기존과 동일, 하이라이트
* **이전 점수**: "이전: N점" 표시
* **하단**: [결과 보기] 버튼

#### 4.5.4 데이터 요구사항

* 감정 점수 (후), 비교용 이전 점수 포함

#### 4.5.5 예외 처리

* 미선택 시 에러 메시지 표시, 버튼 비활성화

---

### 4.6 결과 요약 화면

#### 4.6.1 화면 목적

* 루틴 효과 요약 및 피드백 수집

#### 4.6.2 기능 요구사항

* 감정 전후 변화 시각화
* 만족도 점수 선택 (1~5)
* 재사용 의향 선택 (Yes/No)
* 완료 시 감사 화면으로 이동
* 중단(aborted) 상태인 경우 UI 처리 예정

#### 4.6.3 UI/UX 요구사항

* **감정 변화**: 숫자 변화, 시각화 컴포넌트 사용
* **만족도/재사용**: 선택형 UI, 미선택 시 에러 메시지 표시
* **하단**: [완료] 버튼, 조건 충족 시 활성화

#### 4.6.4 데이터 요구사항

* 만족도(1~5), 재사용 여부(boolean), 감정 변화량, 중단 여부

#### 4.6.5 예외 처리

* 필수 항목 미선택 시 경고

---

### 4.7 감사 화면

#### 4.7.1 화면 목적

* 루틴 종료 후 긍정적 마무리 및 다음 행동 유도

#### 4.7.2 기능 요구사항

* 감사 문구 + 이미지 표시
* “처음으로” 버튼 클릭 시 인트로로 이동
* “더 알아보기” 버튼 클릭 시 추후 링크 연결 예정

#### 4.7.3 UI/UX 요구사항

* **이미지**: 원형 이미지 영역
* **텍스트**: “체험해주셔서 감사합니다” 및 서브 문구
* **하단 버튼**: [처음으로], [더 알아보기] (ghost)

#### 4.7.4 데이터 요구사항

* 세션 없음 (정적)

#### 4.7.5 예외 처리

* 네트워크 오류 시에도 표시 가능

---

## 5. 플로우 요약

1. 인트로 → [오늘의 루틴 고르기]
2. 루틴 설정 (감정/BGM/루틴 모드/단계) → [다음]
3. 음성 가이드 선택 → [루틴 시작]
4. 루틴 자동 진행 (음성/문구/배경음)
5. 감정 변화 입력 → [결과 보기]
6. 결과 요약 → [완료]
7. 감사 화면 → [처음으로] 또는 종료

예외: 중단 시 summary 화면으로 이동 (aborted 파라미터 포함)
