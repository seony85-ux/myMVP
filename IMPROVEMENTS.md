# í”„ëŸ°íŠ¸ì—”ë“œ ì½”ë“œ ê°œì„  ì‚¬í•­

## âœ… ì™„ë£Œëœ ê°œì„  ì‚¬í•­

### 1. **ì§„í–‰ ìƒíƒœ í‘œì‹œ ë²„ê·¸ ìˆ˜ì •** (ì¤‘ìš”)
- **ë¬¸ì œ**: `RoutinePlayContent.tsx`ì—ì„œ `completedSteps`ê°€ ë¹ˆ ë°°ì—´ë¡œ í•˜ë“œì½”ë”©ë˜ì–´ ìˆì–´ ì§„í–‰ ìƒíƒœê°€ ì œëŒ€ë¡œ í‘œì‹œë˜ì§€ ì•ŠìŒ
- **í•´ê²°**: í˜„ì¬ ë‹¨ê³„ ì´ì „ì˜ ëª¨ë“  ë‹¨ê³„ë¥¼ `completedSteps`ì— í¬í•¨í•˜ë„ë¡ ìˆ˜ì •
- **ìœ„ì¹˜**: `app/routine/play/RoutinePlayContent.tsx:84`

```typescript
// ìˆ˜ì • ì „
const completedSteps: number[] = []

// ìˆ˜ì • í›„
const completedSteps = useMemo(() => {
  return Array.from({ length: currentStepIndex }, (_, i) => i)
}, [currentStepIndex])
```

### 2. **íƒ€ì… ì•ˆì •ì„± ê°œì„ **
- **ë¬¸ì œ**: íƒ€ì… ë‹¨ì–¸(`as keyof typeof`) ì‚¬ìš©ìœ¼ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ ê°€ëŠ¥ì„±
- **í•´ê²°**: ë” êµ¬ì²´ì ì¸ íƒ€ì… ë‹¨ì–¸ê³¼ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
- **ìœ„ì¹˜**: 
  - `components/EmotionSelector.tsx`
  - `components/SatisfactionSelector.tsx`
  - `components/EmotionComparison.tsx`

```typescript
// ìˆ˜ì • ì „
{emotionLabels[value as keyof typeof emotionLabels]}

// ìˆ˜ì • í›„
{value && value >= 1 && value <= 5 && (
  emotionLabels[value as 1 | 2 | 3 | 4 | 5]
)}
```

### 3. **ì„±ëŠ¥ ìµœì í™”**
- **ë¬¸ì œ**: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°œìƒ ê°€ëŠ¥ì„±
- **í•´ê²°**: `useMemo`ì™€ `useCallback`ì„ ì‚¬ìš©í•˜ì—¬ ê³„ì‚° ë¹„ìš©ì´ í° ê°’ê³¼ í•¨ìˆ˜ ë©”ëª¨ì´ì œì´ì…˜
- **ìœ„ì¹˜**: `app/routine/play/RoutinePlayContent.tsx`

**ìµœì í™”ëœ í•­ëª©:**
- `routineSteps`: ë£¨í‹´ ëª¨ë“œì™€ ì„ íƒëœ ë‹¨ê³„ì— ë”°ë¼ ê³„ì‚°
- `currentStepName`: í˜„ì¬ ë‹¨ê³„ëª… ê³„ì‚°
- `completedSteps`: ì™„ë£Œëœ ë‹¨ê³„ ë°°ì—´ ìƒì„±
- `currentPhraseText`: í˜„ì¬ ëª…ìƒ ë¬¸êµ¬ ê³„ì‚°
- `bgmName`: BGM ì´ë¦„ ê³„ì‚°
- `isLastStep`: ë§ˆì§€ë§‰ ë‹¨ê³„ ì—¬ë¶€ ê³„ì‚°
- ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬: `useCallback`ìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜

### 4. **ì ‘ê·¼ì„± ê°œì„ **
- **ë¬¸ì œ**: ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ì— ARIA ë ˆì´ë¸” ë¶€ì¡±
- **í•´ê²°**: `role`ê³¼ `aria-label` ì†ì„± ì¶”ê°€
- **ìœ„ì¹˜**:
  - `components/BGMCardList.tsx`: `role="listbox"`, `aria-label="ë°°ê²½ìŒ ì„ íƒ"`
  - `components/SkincareStepSelector.tsx`: `role="group"`, `aria-label="ìŠ¤í‚¨ì¼€ì–´ ë‹¨ê³„ ì„ íƒ"`
  - `components/EmotionComparison.tsx`: í™”ì‚´í‘œì— `aria-hidden="true"` ì¶”ê°€

## ğŸ“‹ ì¶”ê°€ ê°œì„  ê¶Œì¥ ì‚¬í•­

### 1. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
í˜„ì¬ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë‚˜ ì˜ˆì™¸ ìƒí™©ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.

**ê¶Œì¥ ì‚¬í•­:**
- ì´ë¯¸ì§€ ë¡œë”© ì‹¤íŒ¨ ì‹œ fallback UI
- ë¼ìš°í„° ë„¤ë¹„ê²Œì´ì…˜ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬
- ì„¸ì…˜ ìŠ¤í† ì–´ ì €ì¥ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§

**ì˜ˆì‹œ:**
```typescript
// ì´ë¯¸ì§€ ë¡œë”© ì‹¤íŒ¨ ì²˜ë¦¬
<img
  src={imageUrl}
  alt={name}
  onError={(e) => {
    e.currentTarget.src = '/images/placeholder.webp'
  }}
/>
```

### 2. **ë¡œë”© ìƒíƒœ í‘œì‹œ**
ë¹„ë™ê¸° ì‘ì—… ì‹œ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•˜ë©´ ì‚¬ìš©ì ê²½í—˜ì´ ê°œì„ ë©ë‹ˆë‹¤.

**ê¶Œì¥ ì‚¬í•­:**
- í˜ì´ì§€ ì „í™˜ ì‹œ ë¡œë”© ì¸ë””ì¼€ì´í„°
- ë°ì´í„° ì €ì¥ ì¤‘ ë¡œë”© ìƒíƒœ í‘œì‹œ

### 3. **í¼ ê²€ì¦ ê°œì„ **
í˜„ì¬ ê²€ì¦ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œë§Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

**ê¶Œì¥ ì‚¬í•­:**
- ì‹¤ì‹œê°„ ê²€ì¦ í”¼ë“œë°±
- ë” ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
- ì ‘ê·¼ì„±ì„ ìœ„í•œ `aria-invalid`, `aria-describedby` ì¶”ê°€

### 4. **ì½”ë“œ ë¶„í•  ìµœì í™”**
í˜„ì¬ ëª¨ë“  í˜ì´ì§€ê°€ ì •ì ìœ¼ë¡œ ìƒì„±ë˜ê³  ìˆìŠµë‹ˆë‹¤.

**ê¶Œì¥ ì‚¬í•­:**
- í° ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì  ì„í¬íŠ¸ ê³ ë ¤
- ì˜¤ë””ì˜¤ íŒŒì¼ì€ í•„ìš”í•  ë•Œë§Œ ë¡œë“œ

### 5. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€**
í˜„ì¬ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.

**ê¶Œì¥ ì‚¬í•­:**
- Jest + React Testing Libraryë¡œ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
- E2E í…ŒìŠ¤íŠ¸ (Playwright ë˜ëŠ” Cypress)

### 6. **ì ‘ê·¼ì„± ì¶”ê°€ ê°œì„ **
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì› ê°•í™”
- í¬ì»¤ìŠ¤ ê´€ë¦¬ ê°œì„ 
- ìŠ¤í¬ë¦° ë¦¬ë” í…ŒìŠ¤íŠ¸

### 7. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**
- Web Vitals ì¸¡ì •
- ë²ˆë“¤ í¬ê¸° ë¶„ì„
- ë Œë”ë§ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§

## ğŸ” ë°œê²¬ëœ ì ì¬ì  ì´ìŠˆ

### 1. **íƒ€ì´ë¨¸ ì •ë¦¬**
`RoutinePlayContent.tsx`ì˜ `useEffect`ì—ì„œ íƒ€ì´ë¨¸ëŠ” ì •ë¦¬ë˜ì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ê¸° ì „ì— ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í˜„ì¬ ì½”ë“œëŠ” ì•ˆì „í•˜ì§€ë§Œ**, ë” ëª…í™•í•˜ê²Œ í•˜ë ¤ë©´:
```typescript
useEffect(() => {
  let isMounted = true
  
  const timer = setTimeout(() => {
    if (isMounted) {
      setCurrentStepIndex((prev) => prev + 1)
    }
  }, 10000)
  
  return () => {
    isMounted = false
    clearTimeout(timer)
  }
}, [dependencies])
```

### 2. **ì„¸ì…˜ ìŠ¤í† ì–´ ì´ˆê¸°í™”**
`resetSession`ì´ í˜¸ì¶œë  ë•Œ localStorageë„ í•¨ê»˜ ì´ˆê¸°í™”ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”í•©ë‹ˆë‹¤. (í˜„ì¬ëŠ” Zustand persistê°€ ìë™ ì²˜ë¦¬)

### 3. **ì´ë¯¸ì§€ ìµœì í™”**
Next.js Image ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ì„ ê³ ë ¤í•´ë³´ì„¸ìš”:
```typescript
import Image from 'next/image'

<Image
  src={imageUrl}
  alt={name}
  width={240}
  height={180}
  className="object-cover"
/>
```

## ğŸ“Š ë¹Œë“œ ê²°ê³¼

```
âœ“ Compiled successfully
âœ“ Linting and checking validity of types
âœ“ Generating static pages (11/11)
```

ëª¨ë“  í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œë˜ì—ˆìŠµë‹ˆë‹¤.

## âœ… ê²°ë¡ 

ì£¼ìš” ë²„ê·¸ëŠ” ìˆ˜ì •ë˜ì—ˆê³ , ì„±ëŠ¥ê³¼ ì ‘ê·¼ì„±ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ì¶”ê°€ ê°œì„  ì‚¬í•­ì€ ì ì§„ì ìœ¼ë¡œ ì ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

